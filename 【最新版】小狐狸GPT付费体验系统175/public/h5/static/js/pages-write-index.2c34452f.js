(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-write-index"],{"038f":function(t,e,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a("870f")),n=getApp(),s={components:{pages:o.default},data:function(){return{topicList:[],promptList:[],promptCount:0,page:1,pagesize:10,scrollTop:0,shareTitle:"",shareImage:"",timeline_share_id:0,topic_id:"all",system:""}},onLoad:function(t){var e=this;this.setData({system:n.globalData.system}),n.globalData.util.checkLogin().then((function(){e.getTopicList(),e.getPrompts()}))},methods:{switchTopic:function(t){var e=t.currentTarget.dataset.topic;this.setData({topic_id:e}),"vote"==e?(this.setData({page:1,promptList:[]}),this.getVotePrompts()):(this.setData({page:1}),this.getPrompts())},getTopicList:function(){var t=this;n.globalData.util.request({url:"/write/getTopicList"}).then((function(e){t.setData({topicList:e.data})}))},getPrompts:function(){var t=this,e=this.topic_id,a=this.page,i=this.pagesize;n.globalData.util.request({url:"/write/getPrompts",data:{topic_id:e,page:a,pagesize:i}}).then((function(e){t.setData({promptList:e.data.list,promptCount:e.data.count}),t.scrollToTop()}))},getVotePrompts:function(){var t=this,e=this.page,a=this.pagesize;n.globalData.util.request({url:"/write/getVotePrompts",data:{page:e,pagesize:a}}).then((function(e){t.setData({promptList:e.data.list,promptCount:e.data.count}),t.scrollToTop()}))},pageChange:function(t){var e=t.detail;this.setData({page:e}),"vote"==this.topic_id?this.getVotePrompts():this.getPrompts()},doVote:function(t){var e=this,a=t.currentTarget.dataset.id;n.globalData.util.request({url:"/write/votePrompt",data:{prompt_id:a}}).then((function(t){n.globalData.util.message(t.message);var i=e.promptList;for(var o in i)i[o].id==a&&(i[o].isVote?i[o].isVote=0:i[o].isVote=1);e.setData({promptList:i})}))},scrollToTop:function(){var t=this;setTimeout((function(){t.setData({scrollTop:0})}),100)},toWriteChat:function(t){var e=t.currentTarget.dataset.id;uni.navigateTo({url:"/pages/write/chat?prompt_id="+e})}}};e.default=s},1168:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-26303ace]{background:#fff;padding-top:%?88?%}body.?%PAGE?%[data-v-26303ace]{background:#fff}.tab-nav[data-v-26303ace]{position:fixed;top:0;width:100%;height:%?88?%;line-height:%?88?%;background-color:#f4fcfb;box-sizing:border-box;z-index:99;border-top:%?1?% solid #eee;border-bottom:%?1?% solid #eee;overflow:hidden;overflow-x:auto}.tab-list[data-v-26303ace]{width:auto;height:100%;display:flex;justify-content:space-between;align-items:center;padding:0 %?20?%}.tab[data-v-26303ace]{font-size:%?28?%;color:#233445;height:%?88?%;line-height:%?88?%;text-align:center;padding:0 %?6?%;position:relative;box-sizing:border-box;border-bottom:%?6?% solid #fff}.tab.active[data-v-26303ace]{color:#04babe;border-bottom:%?6?% solid #04babe}.activitys[data-v-26303ace]{width:100%;padding:%?20?% 0 0 %?20?%;background-color:#f3f6f9}.activitys .act-item[data-v-26303ace]{padding:%?10?% %?20?%;border:1px solid #ccc;color:#666;margin:0 %?20?% %?20?% 0;float:left;display:block;border-radius:%?10?%;font-size:%?24?%}.activitys .act-item.active[data-v-26303ace]{color:#04babe;border-color:#04babe}.prompt-list[data-v-26303ace]{width:100%;background-color:#fff;padding:%?30?% 0 0 %?30?%}.prompt-item[data-v-26303ace]{background:#f7f7f8;padding:%?20?% %?30?%;border-radius:%?14?%;margin:0 %?20?% %?20?% 0;float:left;width:%?280?%;font-family:微软雅黑}.prompt-item[data-v-26303ace]:active{background:#f0f0f0}.prompt-item .title[data-v-26303ace]{font-size:%?28?%;font-weight:700;line-height:%?44?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.prompt-item .desc[data-v-26303ace]{font-size:%?24?%;color:#888;margin-top:%?10?%;line-height:%?36?%;height:%?108?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden}.prompt-item .ops[data-v-26303ace]{display:flex;align-items:center;justify-content:space-between;margin-top:%?30?%;height:%?32?%}.prompt-item .ops .op-item[data-v-26303ace]{display:flex;align-items:center;color:#8e8ea0;font-size:%?24?%}.prompt-item .ops .op-item .icon[data-v-26303ace]{width:%?28?%;height:%?28?%;margin-right:%?10?%}.empty[data-v-26303ace]{text-align:center;margin:0 %?60?%;padding:%?80?% 0 %?100?% 0;margin-top:%?120?%;border-radius:%?20?%}.empty uni-image[data-v-26303ace]{width:%?240?%;height:%?240?%}.box-input[data-v-26303ace]{width:100%;padding:%?40?% 0 0 0;left:0;bottom:0;border-top:1px solid #d8d8e2;background:#f6f9fc}.box-input .input[data-v-26303ace]{width:%?690?%;margin:0 %?30?%;position:relative;box-sizing:border-box;box-shadow:0 0 %?12?% rgba(0,0,0,.15);background:#fefefe}.box-input .input uni-textarea[data-v-26303ace]{width:%?580?%;padding:%?20?% %?10?% %?20?% %?20?%;border-radius:%?10?%;line-height:%?40?%}.box-input .input .btn-send[data-v-26303ace]{position:absolute;right:0;bottom:0;width:%?100?%;height:%?80?%;padding:0;border:none;border-radius:%?10?%;background:none;display:flex;align-items:center;justify-content:center;z-index:9}.box-input .input .btn-send[data-v-26303ace]::after{display:none}.box-input .input .btn-send[data-v-26303ace]:active{background:#f2f2f2}.box-input .input .btn-send uni-image[data-v-26303ace]{width:%?40?%}.btn-finish[data-v-26303ace]{width:60%;height:%?80?%;line-height:%?80?%;border-radius:%?48?%;border:none;color:#fff;margin:%?240?% auto 0 20%;box-shadow:0 0 %?20?% rgba(0,235,79,.1);font-size:%?30?%;letter-spacing:%?4?%;outline:none;background:#39b54a;text-align:center}.box-msg-list[data-v-26303ace]{width:100%;height:100%;top:%?188?%;bottom:%?132?%;left:0;box-sizing:border-box;overflow:hidden}.list[data-v-26303ace]{width:100%;height:auto}.message[data-v-26303ace]{display:flex;justify-content:flex-start;padding:%?40?% %?40?%;border-bottom:%?2?% solid #eee}.message[data-v-26303ace]:last-child{border-bottom:0}.message .text[data-v-26303ace]{width:100%;color:#343541;line-height:%?60?%;font-size:%?32?%;word-break:break-all}.message .avatar[data-v-26303ace]{width:%?48?%;height:%?48?%;background:#10a37f;margin-right:%?30?%;color:#fff;font-size:%?28?%;border-radius:%?4?%;display:flex;align-items:center;justify-content:center;margin-top:%?6?%}.message .avatar uni-image[data-v-26303ace]{width:%?36?%}.account[data-v-26303ace]{margin:%?20?% %?30?%;padding:%?16?% %?24?% %?16?% %?24?%;box-sizing:border-box;\n    /* background: #f3f6f9; */border-radius:%?10?%;display:flex;justify-content:space-between;align-items:center}.account .balance[data-v-26303ace]{color:#666;font-size:%?24?%}.account .balance uni-text[data-v-26303ace]{color:#10a37f;margin-right:%?6?%}.account .btn-pay[data-v-26303ace]{display:inline-block;color:#10a37f;margin-left:%?20?%;font-size:%?24?%}.banner-ad[data-v-26303ace]{width:100%;height:%?120?%;border-top:%?2?% solid #ddd}",""]),t.exports=e},"23fa":function(t,e,a){"use strict";a.r(e);var i=a("7e7d"),o=a("d1da");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("96f5");var s=a("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"26303ace",null,!1,i["a"],void 0);e["default"]=r.exports},"3b2a":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".pages[data-v-841f10f4]{text-align:center;padding:%?20?% 0}.pages uni-text[data-v-841f10f4]{display:inline-block;background:#fff;padding:%?12?% %?30?%;font-size:%?30?%;margin:0 %?20?%;border-radius:%?10?%;color:#666}.pages uni-text[data-v-841f10f4]:active{background:#04babe;color:#fff}.pages .form-block[data-v-841f10f4]{background-color:#fff;padding:%?30?% %?100?% %?30?% %?100?%;box-sizing:border-box;margin-bottom:%?20?%}.pages .form-label[data-v-841f10f4]{margin:0;padding:%?24?% 0 %?24?%;color:#333;font-weight:400;font-size:%?28?%;line-height:%?32?%}",""]),t.exports=e},"4d66":function(t,e,a){var i=a("3b2a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("c9871064",i,!0,{sourceMap:!1,shadowMode:!1})},"5eae":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"pages"},[a("v-uni-text",{staticClass:"prev",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doPrev.apply(void 0,arguments)}}},[t._v("上页")]),a("v-uni-text",{staticClass:"current",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPageInputFun.apply(void 0,arguments)}}},[t._v(t._s(t.page)+" / "+t._s(t.pageMax))]),a("v-uni-text",{staticClass:"next",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doNext.apply(void 0,arguments)}}},[t._v("下页")])],1)},o=[]},"7e7d":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[t.topicList&&t.topicList.length>0?a("v-uni-view",{staticClass:"tab-nav"},[a("v-uni-view",{staticClass:"tab-list",style:"width: "+128*(t.topicList.length+2)+"rpx;"},[a("v-uni-view",{class:"tab "+("vote"==t.topic_id?"active":""),attrs:{"data-topic":"vote"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTopic.apply(void 0,arguments)}}},[t._v("收藏")]),a("v-uni-view",{class:"tab "+("all"==t.topic_id?"active":""),attrs:{"data-topic":"all"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTopic.apply(void 0,arguments)}}},[t._v("全部")]),t._l(t.topicList,(function(e,i){return a("v-uni-view",{key:i,class:"tab "+(t.topic_id==e.id?"active":""),attrs:{"data-topic":e.id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTopic.apply(void 0,arguments)}}},[t._v(t._s(e.title))])}))],2)],1):t._e(),t.promptList&&t.promptList.length>0?a("v-uni-view",{staticClass:"prompt-list"},[t._l(t.promptList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"prompt-item"},[a("v-uni-view",{attrs:{"data-id":e.id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toWriteChat.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(e.title))]),a("v-uni-view",{staticClass:"desc"},[t._v(t._s(e.desc))])],1),a("v-uni-view",{staticClass:"ops"},[a("v-uni-view",{staticClass:"op-item"},[a("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/write/ic_views.png"}}),t._v(t._s(e.views))],1),a("v-uni-view",{staticClass:"op-item"},[a("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/write/ic_usages.png"}}),t._v(t._s(e.usages))],1),a("v-uni-view",{staticClass:"op-item",attrs:{"data-id":e.id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doVote.apply(void 0,arguments)}}},[1==e.isVote?a("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/write/ic_vote_active.png"}}):a("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/write/ic_vote.png"}})],1)],1)],1)})),a("v-uni-view",{staticStyle:{clear:"both"}})],2):a("v-uni-view",{staticClass:"empty"},[a("v-uni-image",{attrs:{src:"/static/images/nodata.png"}})],1),t.promptList&&t.promptCount>t.pagesize?a("v-uni-view",{staticStyle:{padding:"30rpx 0 30rpx 0",width:"100%"}},[a("pages",{attrs:{count:t.promptCount,pagesize:t.pagesize,page:t.page},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.pageChange.apply(void 0,arguments)}}})],1):t._e()],1)},o=[]},"870f":function(t,e,a){"use strict";a.r(e);var i=a("5eae"),o=a("f4a1");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("8d0d");var s=a("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"841f10f4",null,!1,i["a"],void 0);e["default"]=r.exports},"8d0d":function(t,e,a){"use strict";var i=a("4d66"),o=a.n(i);o.a},"96f5":function(t,e,a){"use strict";var i=a("ffd3"),o=a.n(i);o.a},"9c22":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var i={data:function(){return{pageMax:1,pageInput:"",showPageInput:!1}},props:{page:{type:Number,default:0},pagesize:{type:Number},count:{type:Number}},watch:{count_pagesize:{deep:!0,immediate:!0,handler:function(t,e){t.count,t.pagesize;this.setData({pageMax:Math.ceil(this.count/this.pagesize)})}}},methods:{doPageChange:function(){this.$emit("change",{detail:this.pageInput}),this.closePageInput()},doPrev:function(){this.page>1&&this.$emit("change",{detail:this.page-1})},doNext:function(){this.page<this.pageMax&&this.$emit("change",{detail:this.page+1})},showPageInputFun:function(){this.setData({pageInput:this.page,showPageInput:!0})},closePageInput:function(){this.setData({showPageInput:!1})}},created:function(){},computed:{count_pagesize:function(){var t=this.count,e=this.pagesize;return{count:t,pagesize:e}}}};e.default=i},d1da:function(t,e,a){"use strict";a.r(e);var i=a("038f"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},f4a1:function(t,e,a){"use strict";a.r(e);var i=a("9c22"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},ffd3:function(t,e,a){var i=a("1168");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("2df7d5d8",i,!0,{sourceMap:!1,shadowMode:!1})}}]);